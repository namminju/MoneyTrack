<template>
  <div class="statistics-page">
    <Header />
    <StatisticsFilterBox @updateFilter="onFilterUpdate" />

    <!-- <StatisticsGraph
      :filteredType="selectedType"
      :filteredPeriod="selectedPeriod"
    />

    <CategoryList :filteredType="selectedType" /> -->
    <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ìš© í†µê³„ í˜ì´ì§€</h2>

    <p>ğŸ”¹ ì „ì²´ ì§€ì¶œ í•©ê³„: {{ statStore.totalAmount }} ì›</p>

    <ul>
      <li v-for="item in statStore.categoryRatios" :key="item.category">
        {{ item.category }}: {{ item.amount }}ì› ({{ item.ratio }}%)
      </li>
    </ul>
  </div>
  <div>Statictics</div>
</template>

<script setup>
import '@/css/statistics/statistics.css';
import Header from '@/components/Header/Header.vue';
import { ref } from 'vue';
import StatisticsFilterBox from './StatisticsFilterBox.vue';
// import StatisticsGraph from './StatisticsGraph.vue';
// import CategoryList from './CategoryList.vue';
import { useStatisticsStore } from '@/stores/useStatisticsStore';

const store = useStatisticsStore();
const selectedType = ref('ì „ì²´');
const selectedPeriod = ref('ì›”ê°„');

onMounted(() => {
  storeToRefs.fetchData();
});

const onFilterUpdate = ({ type, period }) => {
  selectedType.value = type;
  selectedPeriod.value = period;
};
</script>

<!-- <script setup>
import { onMounted } from 'vue';
import { useStatisticsStore } from '@/stores/useStatisticsStore';

const statStore = useStatisticsStore();

onMounted(() => {
  statStore.fetchData();
});
</script>

<template>
  <div class="test-statistics">
    <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ìš© í†µê³„ í˜ì´ì§€</h2>

    <p>ğŸ”¹ ì „ì²´ ì§€ì¶œ í•©ê³„: {{ statStore.totalAmount }} ì›</p>

    <ul>
      <li v-for="item in statStore.categoryRatios" :key="item.category">
        {{ item.category }}: {{ item.amount }}ì› ({{ item.ratio }}%)
      </li>
    </ul>
  </div>
</template> -->
